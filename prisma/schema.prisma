generator client {
  provider = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}
datasource db {
  provider = "mysql"
  url = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model User {
  id    Int     @id @default(autoincrement())
  name  String?
  photoUrl  String?
  isAdmin   Boolean @default(false)
  posts Post[]
  favorite  Favorite[]
  createdAt  DateTime @default(now()) @db.Timestamp(0)
}

model Post {
  id    Int     @id @default(autoincrement())
  photoUrl  String?
  content String?
  draftContent  String?
  published Boolean @default(false)
  authorId  Int
  author  User  @relation(fields: [authorId], references: [id])
  favorite  Favorite[]
  publishedAt DateTime?
  createdAt  DateTime @default(now()) @db.Timestamp(0)
}

model Favorite {
  id    Int     @id @default(autoincrement())
  userId  Int
  user  User  @relation(fields: [userId], references: [id])
  postId  Int
  post  Post  @relation(fields: [postId], references: [id])
  createdAt  DateTime @default(now()) @db.Timestamp(0)
}

model News {
  id    Int     @id @default(autoincrement())
  title String
  content String
  typeOfNews  TypeOfNews
  publishedAt DateTime?
  createdAt  DateTime @default(now()) @db.Timestamp(0)
}

enum TypeOfNews {
  NOTICE
  RELEASE
  FAILURE
}
